---
import { ui, defaultLang } from '../i18n/translations';
import BaseLayout from "../layouts/BaseLayout.astro";
import Navbar from "./Navbar.astro";
import Carousel from "./Carousel.jsx";
import FriendsGrid from "./FriendsGrid.astro";
import Projects from "./Projects.astro";
import Timeline from "./Timeline.astro";
import { calcAge } from "../utils/helpers";

interface Props {
  lang: string;
}

const { lang = defaultLang } = Astro.props;
const t = ui[lang as keyof typeof ui] || ui[defaultLang];

const birthDate = '2010-09-18';
const age = calcAge(birthDate);
const copiedText = t['copy.copied'];
---

<BaseLayout title={`Vadim Khristenko ‚Äî ${t['hero.aka']}`} lang={lang}>
	<Navbar lang={lang} />
	<main id="top" class="overflow-hidden">
		<section class="py-16 md:py-24 max-w-6xl mx-auto px-4" data-aos="fade-down">
			<div class="grid md:grid-cols-2 gap-8 items-center">
				<div>
					<p class="text-white/70 mb-2" data-aos="fade-right" data-aos-delay="100">{t['hero.aka']}</p>
					<h1 class="text-4xl md:text-5xl font-extrabold leading-tight" data-aos="fade-right" data-aos-delay="200">
						<span class="gradient-text">{t['hero.title']}</span>
					</h1>
					<p class="text-lg text-white/60 mt-4 italic" data-aos="fade-right" data-aos-delay="250">{t['hero.subtitle']}</p>
					<p class="text-white/80 mt-4" data-aos="fade-right" data-aos-delay="300">{t['hero.born']} <span id="age" class="font-bold text-white">{age}</span>.</p>
					<div class="mt-6 flex gap-3" data-aos="fade-up" data-aos-delay="400">
						<a href="#projects" class="px-4 py-2 rounded-lg bg-linear-to-r from-[#e11d48] to-[#7c3aed] text-white">{t['hero.projects']}</a>
						<a href="#contact" class="px-4 py-2 rounded-lg border border-white/15 bg-white/10 hover:bg-white/20">{t['hero.contact']}</a>
					</div>
				</div>
				<div class="flex justify-center" data-aos="zoom-in" data-aos-delay="200">
					<img src="/avatars/Me.jpg" alt="–ê–≤–∞—Ç–∞—Ä VAI-PROG" class="w-40 h-40 rounded-2xl border border-white/10 object-cover" />
				</div>
			</div>
		</section>

		<section id="vibes" class="py-16 md:py-24 max-w-6xl mx-auto px-4" data-aos="fade-up">
			<h2 class="text-3xl md:text-4xl font-extrabold tracking-tight">{t['vibes.title']}</h2>
			<p class="text-lg text-white/70 mt-2">{t['vibes.subtitle']}</p>
			<div class="mt-6" data-aos="zoom-in-up">
				<Carousel client:load lang={lang} />
			</div>
		</section>

		<section id="about" class="py-16 md:py-24 max-w-6xl mx-auto px-4">
			<h2 class="text-3xl md:text-4xl font-extrabold tracking-tight" data-aos="fade-right">{t['about.title']}</h2>
			<p class="text-lg text-white/70 mt-2" data-aos="fade-right" data-aos-delay="100">{t['about.subtitle']}</p>
			<div class="mt-6 grid lg:grid-cols-3 gap-6">
				<article class="rounded-xl bg-white/5 backdrop-blur border border-white/10 p-6 lg:col-span-2" data-aos="fade-up" data-aos-delay="200">
					<p class="text-white/90 leading-relaxed text-lg">
						{t['about.desc']}
					</p>
					<div class="mt-8 grid md:grid-cols-2 gap-6 text-white/80">
						<div class="space-y-2">
							<h3 class="text-white font-bold flex items-center gap-2">
								<svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
								{t['about.ml']}
							</h3>
							<p class="text-sm text-white/70">{t['about.ml.desc']}</p>
						</div>
						<div class="space-y-2">
							<h3 class="text-white font-bold flex items-center gap-2">
								<svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-7 0V4"></path></svg>
								{t['about.devops']}
							</h3>
							<p class="text-sm text-white/70">{t['about.devops.desc']}</p>
						</div>
						<div class="space-y-2">
							<h3 class="text-white font-bold flex items-center gap-2">
								<svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04c0 4.833 1.633 9.335 4.395 12.944A11.95 11.95 0 0012 21.231a11.95 11.95 0 004.223-2.291c2.762-3.609 4.395-8.111 4.395-12.944z"></path></svg>
								{t['about.exp']}
							</h3>
							<p class="text-sm text-white/70">{t['about.exp.desc']}</p>
						</div>
						<div class="space-y-2">
							<h3 class="text-white font-bold flex items-center gap-2">
								<svg class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
								{t['about.work']}
							</h3>
							<p class="text-sm text-white/70">{t['about.work.desc']}</p>
						</div>
					</div>
				</article>
				<aside class="space-y-6" data-aos="fade-left" data-aos-delay="300">
					<div class="rounded-xl bg-white/5 backdrop-blur border border-white/10 p-6">
						<h3 class="font-bold text-lg mb-2 flex items-center gap-2">
							<span class="text-pink-400">üéß</span> {t['about.music']}
						</h3>
						<p class="text-white/70 text-sm leading-relaxed">{t['about.music.desc']}</p>
					</div>
					<div class="rounded-xl bg-white/5 backdrop-blur border border-white/10 p-6">
						<h3 class="font-bold text-lg mb-2 flex items-center gap-2">
							<span class="text-blue-400">üìñ</span> {t['about.vibes']}
						</h3>
						<p class="text-white/70 text-sm leading-relaxed">{t['about.vibes.desc']}</p>
					</div>
				</aside>
			</div>
			<div class="mt-12" data-aos="fade-up">
				<Timeline lang={lang} />
			</div>
		</section>

		<section id="skills" class="py-16 md:py-24 max-w-6xl mx-auto px-4" data-aos="fade-up">
			<h2 class="text-3xl md:text-4xl font-extrabold tracking-tight">{t['skills.title']}</h2>
			<div class="mt-6 flex flex-wrap gap-2">
				{['C++','Rust','Python','Kotlin','TypeScript','JavaScript','Go','PHP','Docker'].map((s, i) => <span class="px-3 py-1 rounded-full bg-white/10 text-white/80 text-sm" data-aos="zoom-in" data-aos-delay={i * 50}>{s}</span>)}
			</div>
		</section>

		<Projects lang={lang} />

		<section id="friends" class="py-16 md:py-24 max-w-6xl mx-auto px-4" data-aos="fade-up">
			<h2 class="text-3xl md:text-4xl font-extrabold tracking-tight">{t['friends.title']}</h2>
			<div class="mt-6">
				<FriendsGrid lang={lang} />
			</div>
		</section>

		<section id="contact" class="py-16 md:py-24 max-w-6xl mx-auto px-4" data-aos="fade-up">
			<h2 class="text-3xl md:text-4xl font-extrabold tracking-tight">{t['contact.title']}</h2>
			<div class="mt-6 contact-grid">
				<a class="contact" href="https://github.com/Vadim-Khristenko" target="_blank" rel="noopener"><img class="icon" src="/icons/github.svg" alt="GitHub"/> <span>@Vadim-Khristenko</span></a>
                <a class="contact" href="https://codeberg.org/VAI_PROG" target="_blank" rel="noopener"><img class="icon" src="/icons/github.svg" alt="Codeberg"/> <span>Codeberg</span></a>
                <a class="contact" href="https://hub.mos.ru/Vadim-Khristenko" target="_blank" rel="noopener"><img class="icon" src="/icons/github.svg" alt="MosHub"/> <span>MosHub</span></a>
				<button class="contact" id="copyEmail"><svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"/></svg><span id="emailText">just@vai-prog.ru</span></button>
				<a class="contact" href="https://t.me/vscreator_life" target="_blank" rel="noopener"><img class="icon" src="/icons/telegram.svg" alt="Telegram"/> <span>Telegram: @vscreator_life</span></a>
				<a class="contact" href="https://t.me/vscreator_bio" target="_blank" rel="noopener"><img class="icon" src="/icons/telegram.svg" alt="Telegram"/> <span>Telegram: @vscreator_bio</span></a>
				<a class="contact" href="https://patreon.com/VAI_PROG" target="_blank" rel="noopener"><img class="icon" src="/icons/patreon.svg" alt="Patreon"/> <span>Patreon</span></a>
				<a class="contact" href="https://twitch.tv/VAI_PROG" target="_blank" rel="noopener"><img class="icon" src="/icons/twitch.svg" alt="Twitch"/> <span>Twitch</span></a>
				<a class="contact" href="https://x.com/VAI_PROG" target="_blank" rel="noopener"><img class="icon" src="/icons/x.svg" alt="X"/> <span>X</span></a>
				<a class="contact" href="https://youtube.com/@VAI_PROG" target="_blank" rel="noopener"><img class="icon" src="/icons/youtube.svg" alt="YouTube"/> <span>YouTube</span></a>
				<a class="contact" href="https://reddit.com/u/VAI_PROG" target="_blank" rel="noopener"><img class="icon" src="/icons/reddit.svg" alt="Reddit"/> <span>Reddit</span></a>
				<a class="contact" href="https://dalink.to/vai_prog" target="_blank" rel="noopener" title="–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –Ω–∞ –∫–æ—Ñ–µ—ë–∫"><img class="icon" src="/icons/coffee.svg" alt="Coffee"/> <span>–ù–∞ –∫–æ—Ñ–µ—ë–∫</span></a>
			</div>
            <div class="mt-8 flex flex-col items-center" data-aos="zoom-in">
                <p class="text-white/70 mb-4">WeChat</p>
                <div class="bg-white p-2 rounded-xl">
                    <div class="w-48 h-48 bg-gray-200 flex items-center justify-center text-black font-bold">
                        <img class="w-full h-full object-cover rounded-lg" src="/WeChat-Friend-QR-Code.png" alt="WeChat QR Code for VAI-PROG"/>
                    </div>
                </div>
            </div>
		</section>
	</main>

	<script define:vars={{ copiedText }}>
		const btn = document.getElementById('copyEmail'); const span = document.getElementById('emailText');
		if (btn && span) btn.addEventListener('click', async ()=>{ try{ await navigator.clipboard.writeText(span.textContent.trim()); const prev=span.textContent; span.textContent=copiedText; setTimeout(()=> span.textContent=prev, 1200); }catch{} });
	</script>
</BaseLayout>
